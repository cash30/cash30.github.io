<!DOCTYPE html>
<html>
  <head>
    <title>Processing.JS inside Webpages: Template</title>
  </head>
  <body>
<!--This draws the canvas on the webpage -->
    <canvas id="mycanvas"></canvas>
  </body>
 
  <!-- Include the processing.js library -->
  <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
  <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
  <script>
  var programCode = function(processingInstance) {
    with (processingInstance) {
      size(400, 400);
      frameRate(30);
       
      // Paste code from Khan Academy here:
     
     
     
     
     
      /******************************************************************************************
the adventures of bobby.

no story. just game.

5TH ON HL??
17 VOTES??
UPPDATE 18 VOTES HOW IS THIS HAPPPPENING?????
20 VOTES HOW?  MY PPROJECT HAS 20 VOTES?!?!?!?!?!?!?!???!
23 votes... keep it together cash....ICANNOTBELEVETHATNUMBER
3RD ON THE HL
i go inactive for 3 days... AND I HAVE 43 VOTES??????!
how do i possibly have 47 votes??
if i get 50 votes i am going to expplode.

(SPLAT!)
55 I DIDN"T EVEN THINK PEOPLE WERE STILL VOTING ON THIS
******************************************************************************************/
//putting this here for if you get realy stuck. ur wlcm. :-)
var curlevel = 1;
//vote if you enjoyed!
//there may or may not be shortcuts...
//credit to liam k for platformer tutorial.
//https://www.khanacademy.org/computer-programming/platformer-tutorial/4978980719378432
frameRate(60);
















var level = curlevel -1;
var keys = {};
var hit = 0;
var rectRect = function(x1,y1,w1,h1,x2,y2,w2,h2){
    return(x1 + w1 > x2 && y1 + h1 > y2 && x1 < x2 + w2 && y1 < y2 + h2);    
};

var blocks = [];
var Block = function(x,y,type){
    this.x = x;
    this.y = y;
    this.w = 20;
    this.h = 20;
   
    this.type = type;
};


//fake portal:a (sends you back a lvl)
// portal:@
//block:b
//tramp:t
//spike s
//f: fake block
var levels = [

    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b..................b',
        'b..................b',
        'b...............i..b',
        'b..................b',
        'b...........i......Ω',
        'b..................Ω',
        'b..................b',
        'b.......i..........b',
        'b..................b',
        'b..................b',
        'b....i.............b',
        'b..................b',
        'b..................b',
        'b..................b',
        'bP.................b',
        'b.................@b',
        'b..................b',
        'b.LLRRllttffssiiii.b',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 1   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b................@.b',
        'b..................b',
        'b..................b',
        'b............s.....b',
        'b..................b',
        'b..................b',
        'b........s.........b',
        'b..................b',
        'b..................f@',
        'b....s........aa...b',
        'b.P................b',
        'b..................b',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 2   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'bp.................b',
        'b..........P.......b',
        'b..........l.......b',
        'b..................b',
        'b..........b.......b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'baaaaaaaa.@.aaaaaaab',
        'bbbbbbbbbbbbbbbbbbbb',
        'b@@@@@@@@@@@@@@@@@@b',
        'bbbbbbbbbbbbbbbbbbbb',
        'bllllllllllllllllllb',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 3   DONE
    [
        'bbbbbbbbbbbbbbbbbbbbbb',
        'b.................@b@b',
        'b..................btb',
        'b..................btb',
        'b.LLLLLLLLLLLLLLLLLbtb',
        'b..................btb',
        'b..................btb',
        'bRRRRRRRRRRRRRRRRR.btb',
        'b..................btb',
        'b..................btb',
        'b.LLLLLLLLLLLLLLLLLbtb',
        'b..................btb',
        'b..................btb',
        'bRRRRRRRRRRRRRRRRR.btb',
        'b..................btb',
        'b..................btb',
        'b.LLLLLLLLLLLLLLLLLbtb',
        'b.................abtb',
        'b....P.............btbb',
        'bbbbbbbbbbbbbbbbbbfbtb',
        'bbbbbbbbbbbbbbbbbb.btb',
        'b...................tb',
        'bssssssssssssssssa..tb',
        'bbbbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 4   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b.................ab',
        'b..................bbbbbbb',
        'b.....................@',
        'b..................bbbbbbb',
        'b..................b',
        'b..................b',
        'b..................b',
        'b................lbb',
        'b..............blllb',
        'b..............ll..b',
        'b.............bl...b',
        'b.............ll...b',
        'b.............ll...b',
        'b..........lb......b',
        'b..........lll.....f@',
        'b..................b',
        'b........b.........b',
        'b.................Pb',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 5   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b......@..a........b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b.....t..s.....b...b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b.....s..t.........b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................f@',
        'b..................b',
        'bP....t..s.........b',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 6   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b......a...@...a...b',
        'b..................b',
        'b..................b',
        'b..................b',
        'bb.................b',
        'b...............b..b',
        'b.........b........b',
        'b..................b',
        'b....b.............b',
        'b.............a....b',
        'b..................b',
        'b.......b..........b',
        'b..................b',
        'b............b.....bbbb',
        'b..................f..b',
        'b...........b......f@@b',
        'bP....b............bbbb',
        'bbsssssssssssssssssb',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 7   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'baaa.....aaaaaaaaaab',
        'b..................b',
        'bl.................b',
        'b.......bbbbbbbb..lb',
        'b........bs.......lb',
        'bb......sbs..bbbbbbb',
        'b........bs.......lb',
        'b........bbbbbbb..lb',
        'bl......bbs.......lb',
        'b........bs..bbbbbbb',
        'b........bs.......lb',
        'bb......sbbbbbbb..lb',
        'b........bs.......lb',
        'f........bs..bbbbbbb',
        'f.......bbs.......lb',
        'fl.......bbbbbbb..lb',
        'f........bllllll..lb',
        'f.lP.a...b@.......lb',
        'ffbbbbbbbbbbbbbbbbbb',
        '@@@@@@@@@@@@@@@@@@@@',
    ],//lvl 8   DONE
    [       'bbbbbbbbbbbbbbbbbbbb',
        'blllllllllllllll@@lb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',        
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'blllllllllllllllttlb',
        'bPfffffffffffffff.ab',        
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 9   DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b..................b',
        'b.........P........b',
        'b..bbbbbbbbbbbbbb..b',
        'b.........@........b',
        'b..................b',
        'b......t......t....b',
        'b.......s...s......b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b.........t........b',
        'b..................b',
        'ba.a.a.a.a.a.a.a.a.b',
        'b..................fbbb',
        'b..................f..b',
        'b..................f..b',
        'b..................f@@b',
        'bllllllllllllllllllbbbb',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 10  DONE
    [
        'bbbbbbbbbbbbbbbbffff',
        'b.................Pbb@@@@@@@@@@',
        'b.LLLLLLLLLLLLLLLLLb',
        'b..................b',
        'bRRRRRRRRRRRRRRRRR.b',
        'b..................b',
        'b.LLLLLLLLLLLLLLLLLb',
        'b..................b',
        'bRRRRRRRRRRRRRRRRR.b',
        'b..................b',
        'b.LLLLLLLLLLLLLLLLLb',
        'b..................b',
        'bRRRRRRRRRRRRRRRRR.b',
        'b..................b',
        'b.LLLLLLLLLLLLLLLLLb',
        'b..................b',
        'bRRRRRRRRRRRRRRRRR.b',
        'b..................a',
        'b@LLLLLLLLLLLLLLLLLb',
        'bbbbbbbbbbbbbbbbbbbb',
        '',
       
    ],//lvl 11  DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b@.................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b.R..R..R..R..R....b',
        'b..................b',
        'b...............bbbb',
        'b................llb',
        'b..................b',
        'b.......L.L.L.L.L.Lb',
        'b....lllllllllllllab',
        'b..................b',
        'b.................Pf@',
        'b..................b',
        'b..................b',
        'b..................b',
        'bt..t..t..t..t..t..b',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 12  DONE
    [
        'bbbbbbbbbbbbbfffffff...b',
        'b...........P......bfffb',
        'b...........b......b...b',
        'b..................b...b',
        'baaaaaaaaa...aaaaaab...b',
        'b@.......a...aaaaaab...b',
        'b........a....aaaaab...b',
        'ba........a...aaaaab...b',
        'baa.......a...aaaaab...b',
        'baa.......a...aaaaab...b',
        'baaa......a....aaaab...b',
        'baaab......a...aaaab...b',
        'baaaa......a...aaaab...b',
        'baaaa......a...aaaab...b',
        'baaaa..b...a..aaaaab...b',
        'baaaa.........aaaaab...b',
        'baaaa.........aaaaab...b',
        'baaaa..b.a....aaaaab...b',
        'baaaaaaaaa...aaaaaab@aab',
        'bbbbbbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 13  DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b..................b',
        'bi.................b',
        'b...iiiiiiiiiiii...b',
        'b..............i...b',
        'bi.............ii..b',
        'b..............i...b',
        'b..............i..ib',
        'bi.............i...b',
        'b..............ii..b',
        'b..............i...b',
        'b..iiiiiiiiii..i..ib',
        '@i.............i...b',
        'bi.............ii..b',
        'b..............i...b',
        'b..............i..ib',
        'baiiiiiiiiiiii.i...b',
        'b..............ii..b',
        'b.P............i..@b',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//lvl 14  DONE
    [

        'bbbbbbbbbbbbbbbbbbbb',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'b..................b',
        'ba................Pb',
        'bbbbbbbbbbbbbbbbbbbb',

    ],//lvl 15  DONE
    [
        'bbbbbbbbbbbbbbbbbbbb',
        'b@.................b',
        'ba.................b',
        'b@.................b',
        'ba.................b',
        'b@.................b',
        'ba.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'b@.................b',
        'ba................Pb',
        'bbbbbbbbbbbbbbbbbbbb',
       
    ],//end level.
    [
/*********************************************************************We're no strangers to love
You know the rules and so do I (do I)
A full commitment's what I'm thinking of
You wouldn't get this from any other guy
I just wanna tell you how I'm feeling
Gotta make you understand
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
We've known each other for so long
Your heart's been aching, but you're too shy to say it (say it)
Inside, we both know what's been going on (going on)
We know the game and we're gonna play it
And if you ask me how I'm feeling
Don't tell me you're too blind to see
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
We've known each other for so long
Your heart's been aching, but you're too shy to say it (to say it)
Inside, we both know what's been going on (going on)
We know the game and we're gonna play it
I just wanna tell you how I'm feeling
Gotta make you understand
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
Never gonna give you up
Never gonna let you down
Never gonna run around and desert you
Never gonna make you cry
Never gonna say goodbye
Never gonna tell a lie and hurt you
*********************************************************************/
    '....................P....................',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    '',
    'bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',
    ],//why do i have an extra level? SECRET DO NOT OPEN
];
//{
var win = function(){text('you win!!\nor do you...\nthere might be more to descover\nyou never know.\nis there a secret level beyond this or \nbefore 1?\n\n\n\ntip: go to line 801 and change nofill();\n to fill(0,0,0)',50,90);};
var scroll = 100;
var rickroll = function(){text("We're no strangers to love\nYou know\nthe rules and so do I (do I)\n A full commitment's what I'm thinking of\nYou wouldn't get this from any other guy\nI just wanna\ntell you how I'm feeling\nGotta make you understand\nNever gonna give you up\nNever gonna letyou down\nNever gonna runaround and desert you\n gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nWe've known each other for so long\nYour heart's been aching, but you're too shy to say it (say it)\nInside, we both know what's been going on (going on)\nWe know the game and we're gonna play it\nAnd if you ask me how I'm feeling\nDon't tell me you're too blind to see\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nWe've known each other for so long\nYour heart's been aching, but you're too shy to say it (to say it)\nInside, we both know what's been going on (going on)\nWe know the game and we're gonna play it\nI just wanna tell you how I'm feeling\nGotta make you understand\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry Never gonna say goodbye\nNever gonna tell a lie and hurt you\nNever gonna give you up\nNever gonna let you down\nNever gonna run around and desert you\nNever gonna make you cry\nNever gonna say goodbye\nNever gonna tell a lie and hurt you ",5,scroll);};
var stuff = function(){text('you win!!\ngood job!\nif you found this, post a (..)\nat the end of your\ncomment in the t&t ',50,90);};
//}
var Player = function(x,y){

    this.x = x;
    this.y = y;
    this.w = 20;
    this.h = 20;
   
    this.px = 0;
    this.py = 0;
   
    this.xv = 0;
    this.yv = 0;
    this.grav = 0.31;
   
    this.canJump = false;
    this.jumpPower = 7;
};

Player.prototype.draw = function() {


image(loadImage("https://cdn.kastatic.org/images/avatars/svg/piceratops-ultimate.svg"),0,0,400,400);
fill(0,0,255);
    noStroke();
    ellipse(this.x+10,this.y+10,this.w,this.h);
    fill(0);
    ellipse(this.x+6,this.y+10,4,10);
    ellipse(this.x+14,this.y+10,4,10);
};

Player.prototype.move = function(){
    this.px = this.x;
    this.py = this.y;
   
    this.y += this.yv;
    this.yv += this.grav;
   
   
    this.x += this.xv;
    this.xv = 0;
    if(keys[LEFT]){
        this.xv = -3;  
    }
    if(keys[RIGHT]){
        this.xv = 3;  
    }
    if(keys[UP]&&this.canJump){
        this.yv = -this.jumpPower;
        this.canJump = false;
    }
};


Player.prototype.collide = function(obj){
    if(obj.checkColl(this)){
        if(this.py <= obj.y - this.h) {
            this.y = obj.y - this.h;    
            this.canJump = true;
            this.yv=0;
        }
        else if(this.px >= obj.x + obj.w) {
            this.x = obj.x+obj.w;
            this.xv = 0;
        }
        else if(this.px  <= obj.x- this.w) {
            this.x = obj.x-this.w;
            this.xv = 0;
        }
        else if(this.py >= obj.y + obj.h){
            this.y = this.py;
            this.yv = -this.yv;
        }  
    }
};

var player = new Player(200,200);



var drawLevel = function(){
    fill(0, 0, 0);


    blocks = [];
    for(var i = 0; i < levels[level].length;i++){    
        for(var j = 0; j < levels[level][i].length;j++){
            switch(levels[level][i][j]){
                case 'b':
                    blocks.push(new Block(j*20,i*20,'block'));
                break;
                case 'P':
                    player.x = j*20;
                    player.y = i*20;
                break;
                case '@':
                    blocks.push(new Block(j*20,i*20,'portal'));
                break;
                case 'l':
                    blocks.push(new Block(j*20,i*20,'lava'));
                break;
                case 't':
                    blocks.push(new Block(j*20,i*20,'tramp'));
                break;
                case 's':
                    blocks.push(new Block(j*20,i*20,'spike'));
                    break;
                case 'f':
                    blocks.push(new Block(j*20,i*20,'fake'));
                    break;
                    case 'a':
                    blocks.push(new Block(j*20,i*20,'fakePortal'));
               break;
                case 'L':
                    blocks.push(new Block(j*20,i*20,'left'));
                    break;
                case 'R':
                    blocks.push(new Block(j*20,i*20,'right'));
                    break;
                case 'i':
                    blocks.push(new Block(j*20,i*20,'invis'));
                    break;
                case 'Ω':
                    blocks.push(new Block(j*20,i*20,'secret'));
           
            }
           
        }
    }
};
 



drawLevel();







draw = function(){

    if (hit >= 5){drawLevel();
    hit = 0;
    }
    background(255,255,255);
    player.draw();

    player.move();
    for(var i = 0; i < blocks.length; i ++){
        blocks[i].display();
        if(blocks[i].type === 'block'){
            player.collide(blocks[i]);
        }
       
        if(blocks[i].checkColl(player)){
            switch(blocks[i].type){
                case 'portal':
                    level ++;
                    drawLevel();
                    hit = 0;
                    player.canJump = true;
                break;
                case 'lava':
                    drawLevel();
                break;
                case 'tramp':
                player.yv = -player.jumpPower-3;
                break;
                case 'spike':
                hit ++;
                player.yv = -player.jumpPower+1;
                background(255, 0, 0);
                break;
                case 'fakePortal':
                    level -=1;
                    drawLevel();
                    hit = 0;
                    break;
                    case 'left':
                    player.collide(blocks[i]);
                    player.xv  = -6;
                    break;
                    case 'right':
                    player.collide(blocks[i]);
                    player.xv  = 6;
                    break;
                    case 'invis':
                    player.collide(blocks[i]);
                    break;
                    case 'secret':
                    level = 15;
                    drawLevel();
                    break;
            }
        }
    }
    //telling you what level you're on
textSize(20);
 var txtlvl = level+1;
fill(0, 0, 0);
text('lvl'+txtlvl,30,40);

if (level === 15){ stuff();
   
}
if (level === 14){ win();
   
}
if (level === 16){ rickroll();
scroll-=3;
}
};














Block.prototype.checkColl = function(obj){
    return(rectRect(this.x,this.y,this.w,this.h,obj.x,obj.y,obj.w,obj.h));
};
Block.prototype.display = function() {
    switch(this.type){
        case 'block':
            fill(0);
            rect(this.x,this.y,this.w,this.h);
        break;
       
          case 'lava':
            fill(255, 0, 0);
            rect(this.x,this.y,this.w,this.h);
        break;
       
          case 'portal':
            fill(255, 0, 255);
            ellipse(this.x+10,this.y +10,this.w,this.h);
        break;
         case 'tramp':
            fill(21, 255, 0);
            rect(this.x,this.y+10 ,this.w,this.h/2);
        break;
         case 'spike':
            fill(84, 84, 84);
            triangle(this.x,this.y+20 ,this.x+20,this.y+20,this.x+10,this.y);
        break;
         case 'fake':
            fill(0, 10, 0);
            rect(this.x,this.y,this.w,this.h);
        break;
                  case 'fakePortal':
            fill(184, 0, 178);
            ellipse(this.x+10,this.y +10,this.w,this.h);
        break;
                 case 'left':
            fill(0, 0, 0);
            rect(this.x,this.y ,this.w,this.h);
            fill(173, 173, 173);
 fill(255, 238, 0);
        triangle(this.x,this.y+10 ,this.x+20,this.y+20,this.x+20,this.y);
            break;
            case 'right':
            fill(0, 0, 0);
            rect(this.x,this.y ,this.w,this.h);
            fill(173, 173, 173);
 fill(255, 238, 0);
        triangle(this.x+20,this.y+10 ,this.x,this.y+20,this.x-0,this.y);
            break;
            case 'invis':
            noFill();
            rect(this.x,this.y,this.w,this.h);
        break;
       
                case 'secret':
            fill(0, 0, 0);
            rect(this.x,this.y,this.w,this.h);
        break;
        }

       
};

keyPressed = function(){
    keys[keyCode] = true;
};
keyReleased = function(){
    keys[keyCode] = false;
};













   
   
   
   
   
   
    }};

  // Get the canvas that ProcessingJS will use
  var canvas = document.getElementById("mycanvas");
  // Pass the function to ProcessingJS constructor
  var processingInstance = new Processing(canvas, programCode);
  </script>
</html>

